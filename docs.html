

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Started &mdash; oshwabadge2018  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="#" class="icon icon-home"> oshwabadge2018
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Getting Started</a><ul>
<li><a class="reference internal" href="#the-apps-menu">The Apps Menu</a><ul>
<li><a class="reference internal" href="#change-name">Change Name</a></li>
<li><a class="reference internal" href="#start-ftp-server">Start FTP Server</a></li>
<li><a class="reference internal" href="#serial-repl">Serial REPL</a></li>
</ul>
</li>
<li><a class="reference internal" href="#shitty-addons">Shitty Addons</a></li>
</ul>
</li>
<li><a class="reference internal" href="#badge-development">Badge Development</a><ul>
<li><a class="reference internal" href="#building-and-flashing">Building and Flashing</a><ul>
<li><a class="reference internal" href="#compiling-firmware-from-scratch">Compiling firmware from scratch</a></li>
<li><a class="reference internal" href="#flashing-your-module">Flashing Your Module</a></li>
</ul>
</li>
<li><a class="reference internal" href="#hacking-the-hardware">Hacking the hardware</a><ul>
<li><a class="reference internal" href="#accessing-the-kicad-pcb-design">Accessing the KiCad PCB design</a></li>
<li><a class="reference internal" href="#pre-generated-schematics">Pre-Generated Schematics</a></li>
</ul>
</li>
<li><a class="reference internal" href="#micropython-examples">Micropython Examples</a><ul>
<li><a class="reference internal" href="#uploading-over-ftp">Uploading over FTP</a></li>
<li><a class="reference internal" href="#accelerometer-example">Accelerometer Example</a></li>
<li><a class="reference internal" href="#e-paper-example">E-paper Example</a></li>
<li><a class="reference internal" href="#touchpads">Touchpads</a></li>
<li><a class="reference internal" href="#adc-input-battery-voltage">ADC Input battery voltage</a></li>
<li><a class="reference internal" href="#temperature-and-humidity-footprint">Temperature and Humidity footprint</a></li>
<li><a class="reference internal" href="#adding-custom-variable-width-fonts">Adding Custom variable width fonts</a></li>
<li><a class="reference internal" href="#additional-micropython-demo-apps">Additional MicroPython demo apps:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">oshwabadge2018</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>Getting Started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/docs.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>Your badge is based on an ESP32-wroom-32 module and a GDEH0213B1 e-paper display. It also contains a KX122-1037 Accelerometer and a footprint for a microsd card that can be soldered on as a soldering exercise.</p>
<p>If your badge has your name on it it&#8217;s been pre-configured already. If no name has been set the badge will display the OHS logo.</p>
<p>cool!</p>
<div class="section" id="the-apps-menu">
<h2>The Apps Menu<a class="headerlink" href="#the-apps-menu" title="Permalink to this headline">¶</a></h2>
<p>Your badge can run python scripts found in it&#8217;s &#8216;apps&#8217; directory. Clicking the Apps icon takes you to a menu where you can select the script you want to run.</p>
<p>Notice that the first 3 scripts do not end in &#8216;.py&#8217;.  These are built in features of your module.</p>
<blockquote>
<div><ul class="simple">
<li>Change Name</li>
<li>Start FTP Server</li>
<li>Serial REPL</li>
</ul>
</div></blockquote>
<div class="section" id="change-name">
<h3>Change Name<a class="headerlink" href="#change-name" title="Permalink to this headline">¶</a></h3>
<p>This option will cause the badge to create an access point named &#8216;ohsbadge-80:7d:3a:xx:xx:xx&#8217; where the last 6 digits will be specific to your badge. This access-point name and an auto-generated password will be printed to the screen. IF you visit the url &#8216;http://192.168.4.1/setup&#8217; after connecting to the access-point you will be taken to a form where you can change the displayed name.</p>
</div>
<div class="section" id="start-ftp-server">
<h3>Start FTP Server<a class="headerlink" href="#start-ftp-server" title="Permalink to this headline">¶</a></h3>
<p>This option will also cause the badge to create an access-point but instead of launching a webserver the badge will start a FTP server. You can connect to this FTP server from your device and add/remove scripts. Any script placed in the apps directory will come up in the apps menu.</p>
</div>
<div class="section" id="serial-repl">
<h3>Serial REPL<a class="headerlink" href="#serial-repl" title="Permalink to this headline">¶</a></h3>
<p>This option will launch a python console that can be accessed over the serial port headers (J1)</p>
</div>
</div>
<div class="section" id="shitty-addons">
<h2>Shitty Addons<a class="headerlink" href="#shitty-addons" title="Permalink to this headline">¶</a></h2>
<p>Your badge has a <a class="reference external" href="https://hackaday.com/2018/06/21/this-is-the-year-conference-badges-get-their-own-badges/shitty-add-on-standard/">Shitty Addon Connector</a> that breaks out 3.3v, ground, sda, and scl. for the addition of all sorts of hats and addons.</p>
</div>
</div>
<div class="section" id="badge-development">
<h1>Badge Development<a class="headerlink" href="#badge-development" title="Permalink to this headline">¶</a></h1>
<div class="section" id="building-and-flashing">
<h2>Building and Flashing<a class="headerlink" href="#building-and-flashing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="compiling-firmware-from-scratch">
<h3>Compiling firmware from scratch<a class="headerlink" href="#compiling-firmware-from-scratch" title="Permalink to this headline">¶</a></h3>
<p>Run the following lines on an ubuntu 16.04 or newer linux install.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">git</span> <span class="n">wget</span> <span class="n">make</span> <span class="n">libncurses</span><span class="o">-</span><span class="n">dev</span> <span class="n">flex</span> <span class="n">bison</span> <span class="n">gperf</span> <span class="n">python</span> <span class="n">python</span><span class="o">-</span><span class="n">serial</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">oshwabadge2018</span><span class="o">/</span><span class="n">ohs2018</span><span class="o">-</span><span class="n">badge</span><span class="o">-</span><span class="n">firmware</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">ohs2018</span><span class="o">-</span><span class="n">badge</span><span class="o">-</span><span class="n">firmware</span>
<span class="n">bash</span> <span class="n">scripts</span><span class="o">/</span><span class="n">build</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>Your firmware will be built in &#8216;micropython/ports/esp32/&#8217;</p>
</div>
<div class="section" id="flashing-your-module">
<h3>Flashing Your Module<a class="headerlink" href="#flashing-your-module" title="Permalink to this headline">¶</a></h3>
<p>Flashing without the programming jig can be a bit annoying.</p>
<blockquote>
<div><ul class="simple">
<li>Short en0 to GND</li>
<li>while en0 is shorted short RST to ground</li>
<li>while en0 is still shorted to GND release RST and wait 3 seconds</li>
<li>connect your serial cable to rx and tx</li>
<li>in the &#8216;micropython/ports/esp32/&#8217; directory run &#8216;make deploy&#8217;</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="hacking-the-hardware">
<h2>Hacking the hardware<a class="headerlink" href="#hacking-the-hardware" title="Permalink to this headline">¶</a></h2>
<div class="section" id="accessing-the-kicad-pcb-design">
<h3>Accessing the KiCad PCB design<a class="headerlink" href="#accessing-the-kicad-pcb-design" title="Permalink to this headline">¶</a></h3>
<p>The board was made in kicad and is <a class="reference external" href="https://github.com/oshwabadge2018/ohs18badge">available on github</a>.</p>
</div>
<div class="section" id="pre-generated-schematics">
<h3>Pre-Generated Schematics<a class="headerlink" href="#pre-generated-schematics" title="Permalink to this headline">¶</a></h3>
<p>These are also hosted on github and <a class="reference external" href="https://github.com/oshwabadge2018/ohs18badge/blob/607e4ca405daa215bd4eab3f1ffea525b4532651/badge-rev4.pdf">can be found here</a></p>
</div>
</div>
<div class="section" id="micropython-examples">
<h2>Micropython Examples<a class="headerlink" href="#micropython-examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="uploading-over-ftp">
<h3>Uploading over FTP<a class="headerlink" href="#uploading-over-ftp" title="Permalink to this headline">¶</a></h3>
<p>Here is an example of uploading a file using ftp on linux:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ftp</span><span class="o">&gt;</span> <span class="nb">open</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">4.1</span>
<span class="n">Connected</span> <span class="n">to</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">4.1</span><span class="o">.</span>
<span class="mi">220</span> <span class="n">Hello</span><span class="p">,</span> <span class="n">this</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">ESP8266</span><span class="o">.</span>
<span class="n">Name</span> <span class="p">(</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">4.1</span><span class="p">:</span><span class="n">avcamilo</span><span class="p">):</span>
<span class="mi">230</span> <span class="n">Logged</span> <span class="ow">in</span><span class="o">.</span>
<span class="n">Remote</span> <span class="n">system</span> <span class="nb">type</span> <span class="ow">is</span> <span class="n">UNIX</span><span class="o">.</span>
<span class="n">Using</span> <span class="n">binary</span> <span class="n">mode</span> <span class="n">to</span> <span class="n">transfer</span> <span class="n">files</span><span class="o">.</span>
<span class="n">ftp</span><span class="o">&gt;</span> <span class="n">put</span> <span class="o">~/</span><span class="n">accel</span><span class="o">.</span><span class="n">py</span> <span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">accel</span><span class="o">.</span><span class="n">py</span>
<span class="n">local</span><span class="p">:</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">avcamilo</span><span class="o">/</span><span class="n">accel</span><span class="o">.</span><span class="n">py</span> <span class="n">remote</span><span class="p">:</span> <span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">accel</span><span class="o">.</span><span class="n">py</span>
<span class="mi">200</span> <span class="n">OK</span>
<span class="mi">150</span> <span class="n">Opened</span> <span class="n">data</span> <span class="n">connection</span><span class="o">.</span>
<span class="mi">226</span> <span class="n">Done</span><span class="o">.</span>
<span class="mi">1006</span> <span class="nb">bytes</span> <span class="n">sent</span> <span class="ow">in</span> <span class="mf">0.00</span> <span class="n">secs</span> <span class="p">(</span><span class="mf">13.7057</span> <span class="n">MB</span><span class="o">/</span><span class="n">s</span><span class="p">)</span>
<span class="n">ftp</span><span class="o">&gt;</span> <span class="n">exit</span>
<span class="mi">221</span> <span class="n">Bye</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="accelerometer-example">
<h3>Accelerometer Example<a class="headerlink" href="#accelerometer-example" title="Permalink to this headline">¶</a></h3>
<p>The datasheet for the accelerometer can be <a class="reference external" href="http://www.farnell.com/datasheets/2189770.pdf">found here</a></p>
<p>Here is Accelerometer sample code:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">font16</span>
<span class="kn">import</span> <span class="nn">gxgde0213b1</span>
<span class="kn">import</span> <span class="nn">machine</span>
<span class="kn">import</span> <span class="nn">struct</span>
<span class="kn">from</span> <span class="nn">ohsbadge</span> <span class="k">import</span> <span class="n">epd</span>
<span class="kn">from</span> <span class="nn">ohsbadge</span> <span class="k">import</span> <span class="n">fb</span>

<span class="n">i2c</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">I2C</span><span class="p">(</span><span class="n">scl</span><span class="o">=</span><span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="mi">22</span><span class="p">),</span> <span class="n">sda</span><span class="o">=</span><span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="mi">21</span><span class="p">))</span>
<span class="n">i2c</span><span class="o">.</span><span class="n">writeto_mem</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mh">0x18</span><span class="p">,</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x80</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">ACCX</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;h&quot;</span><span class="p">,</span><span class="n">i2c</span><span class="o">.</span><span class="n">readfrom_mem</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mh">0x6</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">ACCY</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;h&quot;</span><span class="p">,</span><span class="n">i2c</span><span class="o">.</span><span class="n">readfrom_mem</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mh">0x8</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">ACCZ</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s2">&quot;h&quot;</span><span class="p">,</span><span class="n">i2c</span><span class="o">.</span><span class="n">readfrom_mem</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mh">0x10</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;accelerometer: x=</span><span class="si">{0}</span><span class="s2"> y=</span><span class="si">{1}</span><span class="s2"> z=</span><span class="si">{2}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ACCX</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ACCY</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ACCZ</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

<span class="n">epd</span><span class="o">.</span><span class="n">clear_frame</span><span class="p">(</span><span class="n">fb</span><span class="p">)</span>
<span class="n">epd</span><span class="o">.</span><span class="n">display_string_at</span><span class="p">(</span><span class="n">fb</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;accelerometer:&quot;</span><span class="p">,</span> <span class="n">font16</span><span class="p">,</span> <span class="n">gxgde0213b1</span><span class="o">.</span><span class="n">COLORED</span><span class="p">)</span>
<span class="n">epd</span><span class="o">.</span><span class="n">display_string_at</span><span class="p">(</span><span class="n">fb</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="s2">&quot;x=</span><span class="si">{0}</span><span class="s2"> y=</span><span class="si">{1}</span><span class="s2"> z=</span><span class="si">{2}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ACCX</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ACCY</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ACCZ</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">font16</span><span class="p">,</span> <span class="n">gxgde0213b1</span><span class="o">.</span><span class="n">COLORED</span><span class="p">)</span>
<span class="n">epd</span><span class="o">.</span><span class="n">display_frame</span><span class="p">(</span><span class="n">fb</span><span class="p">)</span>

<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="e-paper-example">
<h3>E-paper Example<a class="headerlink" href="#e-paper-example" title="Permalink to this headline">¶</a></h3>
<p>Here is an example of updating the display. there are two init functions for partial and full resfresh. Partial refresh updates the display quickly but leaves ghosting and full refresh takes longer but looks cleaner. Ignore the name COLORED, its actually black.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ohsbadge</span> <span class="k">import</span> <span class="n">epd</span>
<span class="kn">from</span> <span class="nn">ohsbadge</span> <span class="k">import</span> <span class="n">fb</span>
<span class="kn">import</span> <span class="nn">gxgde0213b1</span>
<span class="kn">import</span> <span class="nn">font16</span>
<span class="kn">import</span> <span class="nn">font12</span>

<span class="n">epd</span><span class="o">.</span><span class="n">clear_frame</span><span class="p">(</span><span class="n">fb</span><span class="p">)</span>
<span class="n">epd</span><span class="o">.</span><span class="n">set_rotate</span><span class="p">(</span><span class="n">gxgde0213b1</span><span class="o">.</span><span class="n">ROTATE_270</span><span class="p">)</span>
<span class="n">epd</span><span class="o">.</span><span class="n">display_string_at</span><span class="p">(</span><span class="n">fb</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Welcome to OHS 2018!&quot;</span><span class="p">,</span> <span class="n">font16</span><span class="p">,</span> <span class="n">gxgde0213b1</span><span class="o">.</span><span class="n">COLORED</span><span class="p">)</span>
<span class="n">epd</span><span class="o">.</span><span class="n">display_string_at</span><span class="p">(</span><span class="n">fb</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="s2">&quot;ESSID = &quot;</span> <span class="o">+</span> <span class="n">essid</span><span class="p">,</span> <span class="n">font12</span><span class="p">,</span> <span class="n">gxgde0213b1</span><span class="o">.</span><span class="n">COLORED</span><span class="p">)</span>
<span class="n">epd</span><span class="o">.</span><span class="n">display_string_at</span><span class="p">(</span><span class="n">fb</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="s2">&quot;PASSWORD = &quot;</span> <span class="o">+</span> <span class="n">wifipass</span><span class="p">,</span> <span class="n">font12</span><span class="p">,</span> <span class="n">gxgde0213b1</span><span class="o">.</span><span class="n">COLORED</span><span class="p">)</span>
<span class="n">epd</span><span class="o">.</span><span class="n">display_string_at</span><span class="p">(</span><span class="n">fb</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="s2">&quot;IP ADDR = &quot;</span> <span class="o">+</span> <span class="n">ipaddr</span><span class="p">,</span> <span class="n">font12</span><span class="p">,</span> <span class="n">gxgde0213b1</span><span class="o">.</span><span class="n">COLORED</span><span class="p">)</span>
<span class="n">epd</span><span class="o">.</span><span class="n">display_frame</span><span class="p">(</span><span class="n">fb</span><span class="p">)</span>
</pre></div>
</div>
<p>You can use a 24 point variable width font rendering:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">G_FreeSans24pt7b</span>

<span class="n">epd</span><span class="o">.</span><span class="n">G_display_string_at</span><span class="p">(</span><span class="n">fb</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;Hello World&quot;</span><span class="p">,</span><span class="n">G_FreeSans24pt7b</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">gxgde0213b1</span><span class="o">.</span><span class="n">COLORED</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="touchpads">
<h3>Touchpads<a class="headerlink" href="#touchpads" title="Permalink to this headline">¶</a></h3>
<p>The board has 6 captouch buttons. They return an analog value that correlates with how much of your finger is on the switch.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">machine</span> <span class="k">import</span> <span class="n">Pin</span><span class="p">,</span> <span class="n">TouchPad</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">TouchPad</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="mi">32</span><span class="p">))</span>
<span class="n">card</span> <span class="o">=</span> <span class="n">TouchPad</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="mi">33</span><span class="p">))</span>
<span class="n">right</span> <span class="o">=</span> <span class="n">TouchPad</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="mi">13</span><span class="p">))</span>
<span class="n">left</span> <span class="o">=</span> <span class="n">TouchPad</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="mi">14</span><span class="p">))</span>
<span class="n">down</span> <span class="o">=</span> <span class="n">TouchPad</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="mi">27</span><span class="p">))</span>
<span class="n">up</span> <span class="o">=</span> <span class="n">TouchPad</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span>
<span class="n">buttons</span> <span class="o">=</span> <span class="p">[</span><span class="n">up</span><span class="p">,</span><span class="n">down</span><span class="p">,</span><span class="n">left</span><span class="p">,</span><span class="n">right</span><span class="p">,</span><span class="n">app</span><span class="p">,</span><span class="n">card</span><span class="p">]</span>
<span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;up&#39;</span><span class="p">,</span><span class="s1">&#39;down&#39;</span><span class="p">,</span><span class="s1">&#39;left&#39;</span><span class="p">,</span><span class="s1">&#39;right’&#39;</span><span class="p">,</span><span class="s1">&#39;app&#39;</span><span class="p">,</span><span class="s1">&#39;card&#39;</span><span class="p">]</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Buttons:</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span><span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
  <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
  <span class="n">i</span><span class="o">=</span><span class="mi">0</span>
  <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">buttons</span><span class="p">:</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">names</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">b</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span><span class="n">end</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="n">i</span><span class="o">+=</span><span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="section" id="adc-input-battery-voltage">
<h3>ADC Input battery voltage<a class="headerlink" href="#adc-input-battery-voltage" title="Permalink to this headline">¶</a></h3>
<p>You can read the voltage of the AA batteries. Unfortunetly the output of the ADC is not really linear with lover voltages reading much less then they actually should on the order of 100-300mv. That said, Here is how you can read the voltage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">machine</span>

<span class="n">adc</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">ADC</span><span class="p">(</span><span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="mi">35</span><span class="p">))</span>
<span class="n">adc</span><span class="o">.</span><span class="n">atten</span><span class="p">(</span><span class="n">adc</span><span class="o">.</span><span class="n">ATTN_11DB</span><span class="p">)</span>

<span class="n">Voltage</span> <span class="o">=</span> <span class="p">(</span><span class="n">adc</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">/</span><span class="mi">4096</span><span class="p">)</span><span class="o">*</span><span class="mf">3.3</span>
</pre></div>
</div>
</div>
<div class="section" id="temperature-and-humidity-footprint">
<h3>Temperature and Humidity footprint<a class="headerlink" href="#temperature-and-humidity-footprint" title="Permalink to this headline">¶</a></h3>
<p>The board has a footprint for a Si7006-A20 temperature and humidity sensor that can be soldered on and comes up as i2c device 0x40</p>
</div>
<div class="section" id="adding-custom-variable-width-fonts">
<h3>Adding Custom variable width fonts<a class="headerlink" href="#adding-custom-variable-width-fonts" title="Permalink to this headline">¶</a></h3>
<p>The font code is converted from adafruit&#8217;s graphics library and uses &#8216;1.1&#8217; style fonts.
If you look at the <a class="reference external" href="https://github.com/oshwabadge2018/micropython/blob/139d93fc9cd86cd22e1443fbdbd4c23feba97161/ports/esp32/modules/G_FreeSans24pt7b.py">Free-Sans Font</a> example you can see that it is a direct conversion of one of these font files containing a charecter array of bitmap data and a array of glyph data.</p>
<p>Python Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">first_char</span> <span class="o">=</span> <span class="mh">0x20</span>
<span class="n">last_char</span> <span class="o">=</span> <span class="mh">0x7e</span>
<span class="n">y_advance</span> <span class="o">=</span> <span class="mi">56</span>

<span class="n">Glyphs</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">[</span>     <span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span>  <span class="mi">12</span><span class="p">,</span>    <span class="mi">0</span><span class="p">,</span>    <span class="mi">1</span> <span class="p">],</span>   <span class="c1"># 0x20 &#39; &#39;</span>
  <span class="p">[</span>     <span class="mi">0</span><span class="p">,</span>   <span class="mi">4</span><span class="p">,</span>  <span class="mi">34</span><span class="p">,</span>  <span class="mi">16</span><span class="p">,</span>    <span class="mi">6</span><span class="p">,</span>  <span class="o">-</span><span class="mi">33</span> <span class="p">],</span>   <span class="c1"># 0x21 &#39;!&#39;</span>
  <span class="p">[</span>    <span class="mi">17</span><span class="p">,</span>  <span class="mi">11</span><span class="p">,</span>  <span class="mi">12</span><span class="p">,</span>  <span class="mi">16</span><span class="p">,</span>    <span class="mi">2</span><span class="p">,</span>  <span class="o">-</span><span class="mi">32</span> <span class="p">],</span>   <span class="c1"># 0x22 &#39;&quot;&#39;</span>

  <span class="p">[</span><span class="n">snip</span><span class="p">]</span>

  <span class="n">Bitmaps</span><span class="o">=</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\xFF\x76\x66\x66\x00\x0F\xFF\xFF\xF1\xFE\x3F</span><span class="s1">\x</span>
</pre></div>
</div>
<p><a class="reference external" href="https://github.com/adafruit/Adafruit-GFX-Library/blob/master/Fonts/FreeSans24pt7b.h">Source C file for comparison</a></p>
</div>
<div class="section" id="additional-micropython-demo-apps">
<h3>Additional MicroPython demo apps:<a class="headerlink" href="#additional-micropython-demo-apps" title="Permalink to this headline">¶</a></h3>
<p>MicroPython programs that can run as &#8220;apps&#8221; on the Open Hardware Summit 2018 badge.  These Python files can be transferred to badge via FTP: <a class="reference external" href="https://github.com/oshwabadge2018/ohs18apps">ohs18apps repo</a></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Alex Camilo.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>